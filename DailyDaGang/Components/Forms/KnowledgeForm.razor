@inherits FeedbackComponent<Knowledge?>

<Form Model="@model" LabelColSpan="4" WrapperColSpan="20" @ref="formRef">
    <FormItem>
        <Input @bind-Value="@context.Title"/>
    </FormItem>
    <FormItem>
        <AntDesign.TextArea @bind-Value="@context.Content" MinRows="10"/>
    </FormItem>
</Form>
@code {
    private Form<Knowledge> formRef;
    Knowledge model = new();
    
    protected override void OnInitialized()
    {
        model = Options ?? new();
        base.OnInitialized();
    }
    
    public override Task OnFeedbackOkAsync(ModalClosingEventArgs args)
    {
        if (!formRef.Validate())
            args.Cancel = true;
        else
        {
            formRef.Submit();
            //存入到数据库里面
            Db.Execute(x => x.GetCollection<Knowledge>().Upsert(model));
        }
        return base.OnFeedbackOkAsync(args);
    }
}